var _0x49d0=['fullstate','addClass','#reload','176052xOlhXa','{{sroot}}sprites/text/TWO.gif','#minus-one-button','undefined','reset','{{sroot}}sprites/text/THREE.gif','https:','40147wnSZgX','#turn-denominator','update','hide','empty','Received\x20unexpected\x20server\x20message:','removeClass','padding-bottom','backspace','#baba','right','THREE','rewind','{{sroot}}sprites/text/FOUR.gif','#rewind-controls','last','diff','stringify','onmessage','3TVoHqZ','<div\x20/>','cover','{{sroot}}sprites/text/YOU.gif','state','212PGnohG','protocol','data','1WxMOrm','length','click','50%','text-align','lastIndexOf','css','onopen','#plus-one-button','width','onclose','show','height','518712zLXaix','hash','.viewport','wss://','/ws/puzzle/divided-is-us','label-','undo','send','active','level','font-size','board','socket\x20opened!','won','parse','sprite','down','host','607030dKbdLI','1BLWWMZ','Player\x20','concat','#turn-numerator','location','push','padding-left','1004xiJqix','remove','forEach','which','605266DbMYyL','#revert','632459fYpISQ','slice','html','player','YOU','target','hidden','#reset','padding-top','#cancel','Invalid\x20state','left','type','start','appendTo','reload','center','absolute','15KMJjSg','grayscale(0)','#baba-','#reload-button','log'];var _0x455b=function(_0x503978,_0x918256){_0x503978=_0x503978-0x14a;var _0x49d027=_0x49d0[_0x503978];return _0x49d027;};var _0x3272b0=_0x455b;(function(_0x3e79da,_0x1edf31){var _0x31a787=_0x455b;while(!![]){try{var _0x427633=-parseInt(_0x31a787(0x14a))+parseInt(_0x31a787(0x19e))*-parseInt(_0x31a787(0x184))+-parseInt(_0x31a787(0x168))*-parseInt(_0x31a787(0x15d))+parseInt(_0x31a787(0x1a6))*parseInt(_0x31a787(0x16a))+-parseInt(_0x31a787(0x164))*-parseInt(_0x31a787(0x1a3))+-parseInt(_0x31a787(0x15c))+-parseInt(_0x31a787(0x17c))*-parseInt(_0x31a787(0x18b));if(_0x427633===_0x1edf31)break;else _0x3e79da['push'](_0x3e79da['shift']());}catch(_0x217dad){_0x3e79da['push'](_0x3e79da['shift']());}}}(_0x49d0,0x61620),IMG_WIDTH=0x30,IMG_HEIGHT=0x30,MINI_SCALE=0.5,JUKE_THRESHOLD=0x5);function sendReset(){var _0x2ed490=_0x455b;socket[_0x2ed490(0x151)](JSON[_0x2ed490(0x19c)]({'type':_0x2ed490(0x188),'board':currentLevel[0x1]}));}function sendUndo(){var _0x1c3569=_0x455b;!winning&&socket[_0x1c3569(0x151)](JSON[_0x1c3569(0x19c)]({'type':_0x1c3569(0x150),'board':currentLevel[0x1]}));}function sendMove(_0x24c97d){var _0x55d230=_0x455b;socket[_0x55d230(0x151)](JSON[_0x55d230(0x19c)]({'type':'move','board':currentLevel[0x1],'direction':_0x24c97d}));}function sendStart(){var _0x162a7b=_0x455b;socket[_0x162a7b(0x151)](JSON[_0x162a7b(0x19c)]({'type':_0x162a7b(0x177),'board':currentLevel[0x1]}));}function sendRewind(){var _0x55482a=_0x455b;const _0x2fcf0f=parseInt(currentLevel[0x1]),_0x334d76=stored_states[_0x2fcf0f][currentIndex],_0x5ed030=stored_hashes[_0x2fcf0f][currentIndex];socket[_0x55482a(0x151)](JSON[_0x55482a(0x19c)]({'type':_0x55482a(0x197),'board':_0x2fcf0f,'state':_0x334d76,'hash':_0x5ed030}));}function clearActive(_0x4c66d0){var _0x398b2d=_0x455b;_0x4c66d0[_0x398b2d(0x166)](_0x553e53=>$('#'+_0x553e53)['removeClass'](_0x398b2d(0x152)));}levels=['l1','l2','l3','l4','l5','l6','l7','l8','l9'],rewind_is_active=![],stored_states={},stored_hashes={};for(var i=0x1;i<=0x9;i++){stored_states[i]=[],stored_hashes[i]=[];}function setUpClicks(_0x3165cf,_0x34e232){var _0x72599d=_0x455b;_0x3165cf[_0x72599d(0x166)](_0x53ebab=>{var _0x1c3aac=_0x72599d;$('#'+_0x53ebab)[_0x1c3aac(0x1a8)](_0x4387b9=>{var _0x559ea2=_0x1c3aac;clearActive(_0x3165cf),$(_0x4387b9[_0x559ea2(0x16f)])[_0x559ea2(0x182)](_0x559ea2(0x152)),_0x34e232(_0x53ebab);});});}currentIndex=0x0,currentLevel='l1',currentPlayer='p0',tx=0x0,ty=0x0,maxLevel=0x1,setUpClicks(levels,_0x5aca61=>{if(rewind_is_active)return;const _0x1fde48=parseInt(_0x5aca61[0x1]);currentLevel=_0x5aca61,sendStart();}),$(_0x3272b0(0x171))[_0x3272b0(0x1a8)](function(){!rewind_is_active&&sendReset();}),$(_0x3272b0(0x17f))[_0x3272b0(0x1a8)](function(){var _0x37ddae=_0x3272b0;location[_0x37ddae(0x179)]();}),$(document)['keydown'](function(_0x578afb){var _0x1b88f0=_0x3272b0;if(winning)return;var _0x45647d={'A':0x41,'S':0x53,'W':0x57,'D':0x44,'left':0x25,'up':0x26,'right':0x27,'down':0x28,'Z':0x5a,'backspace':0x8};if(rewind_is_active)switch(_0x578afb[_0x1b88f0(0x167)]){case _0x45647d[_0x1b88f0(0x175)]:case _0x45647d['A']:do_rewind(-0x1);return;case _0x45647d[_0x1b88f0(0x195)]:case _0x45647d['D']:do_rewind(+0x1);return;}switch(_0x578afb[_0x1b88f0(0x167)]){case _0x45647d[_0x1b88f0(0x175)]:case _0x45647d['A']:sendMove('W'),_0x578afb['preventDefault']();break;case _0x45647d['up']:case _0x45647d['W']:sendMove('N'),_0x578afb['preventDefault']();break;case _0x45647d[_0x1b88f0(0x195)]:case _0x45647d['D']:sendMove('E'),_0x578afb['preventDefault']();break;case _0x45647d[_0x1b88f0(0x15a)]:case _0x45647d['S']:sendMove('S'),_0x578afb['preventDefault']();break;case _0x45647d[_0x1b88f0(0x193)]:case _0x45647d['Z']:sendUndo(),_0x578afb['preventDefault']();break;}}),$(_0x3272b0(0x186))[_0x3272b0(0x1a8)](function(){do_rewind(-0x1);}),$(_0x3272b0(0x1ae))[_0x3272b0(0x1a8)](function(){do_rewind(+0x1);});function do_rewind(_0x10af1c){var _0x3f9a55=_0x3272b0;!rewind_is_active&&(rewind_is_active=!![],$('.viewport')[_0x3f9a55(0x1ac)]({'filter':'grayscale(1)'}),$(_0x3f9a55(0x173))['removeClass']('hidden'),$('#revert')[_0x3f9a55(0x191)](_0x3f9a55(0x170)));board=parseInt(currentLevel[0x1]),currentIndex+=_0x10af1c;if(currentIndex>=stored_states[board]['length'])currentIndex=stored_states[board][_0x3f9a55(0x1a7)]-0x1;else currentIndex<0x0&&(currentIndex=0x0);$(_0x3f9a55(0x160))[_0x3f9a55(0x16c)](currentIndex+0x1),render_state(stored_states[board][currentIndex]);}function stopRewind(){var _0x1439ab=_0x3272b0;currentIndex=stored_states[board][_0x1439ab(0x1a7)]-0x1,$(_0x1439ab(0x173))[_0x1439ab(0x182)](_0x1439ab(0x170)),$(_0x1439ab(0x169))[_0x1439ab(0x182)](_0x1439ab(0x170)),$(_0x1439ab(0x14c))['css']({'filter':_0x1439ab(0x17d)}),currentIndex=stored_states[board]['length']-0x1,rewind_is_active=![];}$(_0x3272b0(0x173))[_0x3272b0(0x1a8)](function(){var _0x395805=_0x3272b0;stopRewind(),$(_0x395805(0x160))[_0x395805(0x16c)](currentIndex+0x1),render_state(stored_states[board][currentIndex]);}),$(_0x3272b0(0x169))[_0x3272b0(0x1a8)](function(){var _0xc8b4ab=_0x3272b0;sendRewind(),$(_0xc8b4ab(0x160))[_0xc8b4ab(0x16c)](currentIndex+0x1),stopRewind();});function setTitle(){var _0x175829=_0x3272b0;titles=[undefined,_0x175829(0x16e),'TWO',_0x175829(0x196),'FOUR'],title=titles[parseInt(currentPlayer[0x1])];if(title)$('.puzzle-title-header')[_0x175829(0x16c)]('Divided\x20is\x20<img\x20src=\x27{{sroot}}sprites/text/'+title+'.gif\x27\x20width=\x2748\x27\x20height=\x2748\x27>');}function set_max_level(_0x41287e){var _0x5de9a4=_0x3272b0;maxLevel<_0x41287e&&($('#'+levels[maxLevel-0x1])['removeClass'](_0x5de9a4(0x19a)),maxLevel=_0x41287e,$('#'+levels[_0x41287e-0x1])[_0x5de9a4(0x182)]('last'));for(i=0x0;i<_0x41287e;i++){$('#'+levels[i])[_0x5de9a4(0x191)](_0x5de9a4(0x170));}}stuff={};function getID(_0x200bdf,_0x4513f3,_0x1f1e62,_0x36c9ca){return _0x200bdf+'-'+_0x4513f3+'-'+_0x1f1e62+'-'+_0x36c9ca;}function check(_0x54e202,_0x4e5a7b,_0x4a76aa){if(_0x4a76aa=='p1')return _0x54e202<=tx&&_0x4e5a7b<=ty;else{if(_0x4a76aa=='p2')return _0x54e202>=tx&&_0x4e5a7b<=ty;else{if(_0x4a76aa=='p3')return _0x54e202<=tx&&_0x4e5a7b>=ty;else{if(_0x4a76aa=='p4')return _0x54e202>=tx&&_0x4e5a7b>=ty;}}}}function shift(_0x8f79b4,_0xe749d2,_0x3c081c){if(_0x3c081c=='p1')return[_0x8f79b4,_0xe749d2];else{if(_0x3c081c=='p2')return[_0x8f79b4-tx,_0xe749d2];else{if(_0x3c081c=='p3')return[_0x8f79b4,_0xe749d2-ty];else{if(_0x3c081c=='p4')return[_0x8f79b4-tx,_0xe749d2-ty];}}}}function addLabelForPlayer(_0x4ceac9){var _0x387465=_0x3272b0;if(_0x4ceac9==currentPlayer){target=$(_0x387465(0x194));var _0x10ba7e=IMG_WIDTH,_0x3e1765=IMG_HEIGHT,_0x963c97=0x1e;}else{target=$(_0x387465(0x17e)+_0x4ceac9);var _0x10ba7e=IMG_WIDTH*MINI_SCALE,_0x3e1765=IMG_HEIGHT*MINI_SCALE,_0x963c97=0x10;}if(_0x4ceac9=='p1')icon=_0x387465(0x1a1);else{if(_0x4ceac9=='p2')icon=_0x387465(0x185);else{if(_0x4ceac9=='p3')icon=_0x387465(0x189);else{if(_0x4ceac9=='p4')icon=_0x387465(0x198);}}}var _0xa6eb53=$('<div\x20/>',{'id':_0x387465(0x14f)+_0x4ceac9,'width':(tx+0x1)*_0x10ba7e});_0xa6eb53[_0x387465(0x1ac)](_0x387465(0x1aa),_0x387465(0x17a)),_0xa6eb53[_0x387465(0x1ac)](_0x387465(0x154),_0x963c97),_0xa6eb53[_0x387465(0x1ac)]({'left':parseInt(target[_0x387465(0x1ac)](_0x387465(0x163))),'top':0x2*parseInt(target[_0x387465(0x1ac)](_0x387465(0x192)))+(ty+1.2)*_0x3e1765,'position':_0x387465(0x17b)}),_0xa6eb53[_0x387465(0x16c)](_0x387465(0x15e)+_0x4ceac9[0x1]),_0xa6eb53[_0x387465(0x178)](target);}function addElementForPlayer(_0x124a1b,_0x3f1968,_0x1ac6f3,_0xabb39a){var _0x1a95a3=_0x3272b0;if(!check(_0x124a1b,_0x3f1968,_0xabb39a))return;if(_0xabb39a==currentPlayer){target=$(_0x1a95a3(0x194));var _0x43d246=IMG_WIDTH,_0x13afe0=IMG_HEIGHT;}else{target=$(_0x1a95a3(0x17e)+_0xabb39a);var _0x43d246=IMG_WIDTH*MINI_SCALE,_0x13afe0=IMG_HEIGHT*MINI_SCALE;}const [_0x3469e1,_0x2dc2f6]=shift(_0x124a1b,_0x3f1968,_0xabb39a);var _0x396661=$(_0x1a95a3(0x19f),{'id':getID(_0x124a1b,_0x3f1968,_0x1ac6f3,_0xabb39a),'class':_0x1a95a3(0x159)+_0x1ac6f3});_0x396661[_0x1a95a3(0x1ac)]({'left':parseInt(target[_0x1a95a3(0x1ac)]('padding-left'))+_0x3469e1*_0x43d246,'top':parseInt(target[_0x1a95a3(0x1ac)](_0x1a95a3(0x172)))+_0x2dc2f6*_0x13afe0,'position':_0x1a95a3(0x17b),'width':_0x43d246,'height':_0x13afe0,'background-size':_0x1a95a3(0x1a0)}),_0x396661['appendTo'](target);}function addElement(_0x71e6ac,_0x3e6ff1,_0x58e26e){maxLevel>=JUKE_THRESHOLD?(addElementForPlayer(_0x71e6ac,_0x3e6ff1,_0x58e26e,'p1'),addElementForPlayer(_0x71e6ac,_0x3e6ff1,_0x58e26e,'p2'),addElementForPlayer(_0x71e6ac,_0x3e6ff1,_0x58e26e,'p3'),addElementForPlayer(_0x71e6ac,_0x3e6ff1,_0x58e26e,'p4')):addElementForPlayer(_0x71e6ac,_0x3e6ff1,_0x58e26e,currentPlayer);}function removeElementForPlayer(_0x346075,_0x32da32,_0x49410d,_0x179b1b){var _0x3d8682=_0x3272b0;if(!check(_0x346075,_0x32da32,_0x179b1b))return;$('#'+getID(_0x346075,_0x32da32,_0x49410d,_0x179b1b))[_0x3d8682(0x165)]();}function removeElement(_0x147bdc,_0x5ad721,_0x4c601d){maxLevel>=JUKE_THRESHOLD?(removeElementForPlayer(_0x147bdc,_0x5ad721,_0x4c601d,'p1'),removeElementForPlayer(_0x147bdc,_0x5ad721,_0x4c601d,'p2'),removeElementForPlayer(_0x147bdc,_0x5ad721,_0x4c601d,'p3'),removeElementForPlayer(_0x147bdc,_0x5ad721,_0x4c601d,'p4')):removeElementForPlayer(_0x147bdc,_0x5ad721,_0x4c601d,currentPlayer);}function render_state(_0x32309d){var _0x4391f5=_0x3272b0;mainbaba=$(_0x4391f5(0x194)),width=_0x32309d[0x0],height=_0x32309d[0x1],mainbaba[_0x4391f5(0x18f)](),tx=(width-0x1)/0x2,ty=(height-0x1)/0x2;maxLevel>0x1&&$(_0x4391f5(0x199))[_0x4391f5(0x191)](_0x4391f5(0x170));mainbaba[_0x4391f5(0x1af)]((tx+0x1)*IMG_WIDTH),mainbaba[_0x4391f5(0x1b2)]((ty+0x1)*IMG_HEIGHT);if(maxLevel>=JUKE_THRESHOLD)for(var _0x3baef1=0x1;_0x3baef1<=0x4;_0x3baef1++){var _0xe1f907='p'+_0x3baef1;currentPlayer==_0xe1f907?$(_0x4391f5(0x17e)+_0xe1f907)['remove']():($(_0x4391f5(0x17e)+_0xe1f907)['empty'](),$(_0x4391f5(0x17e)+_0xe1f907)[_0x4391f5(0x1b1)](),$(_0x4391f5(0x17e)+_0xe1f907)['width']((tx+0x1)*IMG_WIDTH*MINI_SCALE),$(_0x4391f5(0x17e)+_0xe1f907)[_0x4391f5(0x1b2)]((ty+0x1)*IMG_HEIGHT*MINI_SCALE)),addLabelForPlayer(_0xe1f907);}else for(var _0x3baef1=0x1;_0x3baef1<=0x4;_0x3baef1++){var _0xe1f907='p'+_0x3baef1;$(_0x4391f5(0x17e)+_0xe1f907)[_0x4391f5(0x18e)]();}if(_0x32309d[_0x4391f5(0x1a7)]%0x3!=0x2)throw _0x4391f5(0x174);for(var _0x3baef1=0x2;_0x3baef1<_0x32309d[_0x4391f5(0x1a7)];_0x3baef1+=0x3){x=_0x32309d[_0x3baef1],y=_0x32309d[_0x3baef1+0x1],t=_0x32309d[_0x3baef1+0x2],addElement(x,y,t);}}function process_full_state_message(_0x4fe821,_0x2eaf2e,_0x1130ce,_0x2963e2){var _0x3427f4=_0x3272b0,_0x47fce7;stored_hashes[_0x4fe821][0x0]==_0x2963e2?_0x47fce7=0x0:(_0x47fce7=stored_hashes[_0x4fe821][_0x3427f4(0x1ab)](_0x2963e2),_0x47fce7==-0x1&&(_0x47fce7=0x0));stored_states[_0x4fe821]=stored_states[_0x4fe821][_0x3427f4(0x16b)](0x0,_0x47fce7),stored_hashes[_0x4fe821]=stored_hashes[_0x4fe821][_0x3427f4(0x16b)](0x0,_0x47fce7),stored_states[_0x4fe821][_0x3427f4(0x162)](_0x2eaf2e),stored_hashes[_0x4fe821][_0x3427f4(0x162)](_0x2963e2);if(_0x4fe821!=parseInt(currentLevel[0x1]))return;winning=_0x1130ce,rewind_is_active&&stopRewind(),render_state(_0x2eaf2e),currentIndex=stored_states[_0x4fe821][_0x3427f4(0x1a7)]-0x1,$(_0x3427f4(0x160))[_0x3427f4(0x16c)](currentIndex+0x1),$('#turn-denominator')[_0x3427f4(0x16c)](currentIndex+0x1);}function process_update(_0xa8b158,_0x33dd4e,_0x544e35,_0xd7a68d){var _0x100fc5=_0x3272b0;const _0x1d1575=stored_states[_0xa8b158][stored_states[_0xa8b158]['length']-0x1];var _0x34bc3d=_0x1d1575[_0x100fc5(0x16b)](0x0);_0x33dd4e[_0x100fc5(0x166)](_0x478007=>{var _0xf17b18=_0x100fc5;if(_0x478007[0x2])_0x34bc3d['push'](_0x478007[0x0]),_0x34bc3d['push'](_0x478007[0x1]),_0x34bc3d['push'](_0x478007[0x3]);else for(var _0x3d4659=0x2;_0x3d4659<_0x34bc3d[_0xf17b18(0x1a7)];++_0x3d4659){if(_0x34bc3d[_0x3d4659]==_0x478007[0x0]&&_0x34bc3d[_0x3d4659+0x1]==_0x478007[0x1]&&_0x34bc3d[_0x3d4659+0x2]==_0x478007[0x3]){_0x34bc3d=_0x34bc3d[_0xf17b18(0x16b)](0x0,_0x3d4659)[_0xf17b18(0x15f)](_0x34bc3d[_0xf17b18(0x16b)](_0x3d4659+0x3));break;}}}),stored_states[_0xa8b158][_0x100fc5(0x162)](_0x34bc3d),stored_hashes[_0xa8b158][_0x100fc5(0x162)](_0xd7a68d);if(_0xa8b158!=parseInt(currentLevel[0x1]))return;if(rewind_is_active){if(_0x544e35)stopRewind();else{$(_0x100fc5(0x18c))[_0x100fc5(0x16c)](stored_states[_0xa8b158][_0x100fc5(0x1a7)]);return;}}currentIndex=stored_states[_0xa8b158]['length']-0x1,$(_0x100fc5(0x160))[_0x100fc5(0x16c)](currentIndex+0x1),$(_0x100fc5(0x18c))['html'](currentIndex+0x1),_0x33dd4e[_0x100fc5(0x166)](_0x27c5d7=>{_0x27c5d7[0x2]?addElement(_0x27c5d7[0x0],_0x27c5d7[0x1],_0x27c5d7[0x3]):removeElement(_0x27c5d7[0x0],_0x27c5d7[0x1],_0x27c5d7[0x3]);}),_0x544e35&&(alert('Congratulations!'),currentLevel==maxLevel?(currentLevel++,maxLevel++,sendStart()):winning=!![]);}location[_0x3272b0(0x1a4)]===_0x3272b0(0x18a)?socket=new WebSocket(_0x3272b0(0x14d)+window[_0x3272b0(0x161)][_0x3272b0(0x15b)]+_0x3272b0(0x14e)):socket=new WebSocket('ws://'+window[_0x3272b0(0x161)]['host']+'/ws/puzzle/divided-is-us');socket[_0x3272b0(0x1ad)]=function(_0x26fda1){var _0x22df80=_0x3272b0;console[_0x22df80(0x180)](_0x22df80(0x156)),socket[_0x22df80(0x151)](JSON[_0x22df80(0x19c)]({'type':'AUTH','data':auth_token}));},socket[_0x3272b0(0x19d)]=function(_0x3065a0){var _0x27562f=_0x3272b0;data=JSON[_0x27562f(0x158)](_0x3065a0[_0x27562f(0x1a5)]);if(data['type']==_0x27562f(0x181))process_full_state_message(data[_0x27562f(0x155)],data[_0x27562f(0x1a2)],data['won'],data[_0x27562f(0x14b)]);else{if(data['type']=='init')set_max_level(data[_0x27562f(0x153)]),typeof data[_0x27562f(0x16d)]!==_0x27562f(0x187)&&(currentPlayer='p'+data['player']),setTitle();else data['type']==_0x27562f(0x18d)?process_update(data['board'],data[_0x27562f(0x19b)],data[_0x27562f(0x157)],data[_0x27562f(0x14b)]):console['log'](_0x27562f(0x190),data[_0x27562f(0x176)]);}},socket[_0x3272b0(0x1b0)]=function(_0x3a34d0){var _0x3d3e47=_0x3272b0;alert('Disconnected.\x20Refresh\x20to\x20reconnect.'),$(_0x3d3e47(0x14c))[_0x3d3e47(0x1ac)]({'opacity':_0x3d3e47(0x1a9)}),$(_0x3d3e47(0x183))[_0x3d3e47(0x191)](_0x3d3e47(0x170));};
